# CPU 스케줄링
---

## 스케줄링이란?
- 시스템이 실행하고자 할 때 프로세서(CPU)를 프로그램들에게 할당하는 과정을 스케줄링이라한다
(프로세스가 cpu를 사용하다 I/O 등 cpu를 사용하지 않는 작업을 할때, 따른 ready 큐에 있는 프로세스를 실행) -> 빠른 응답시간 / 적은 대기시간


- 공평성 : 모든 프로세스가 공평하게 작업
- 효율성 : 놀고있는 자원이 생기지 않도록
- 안정성 : 중요 프로세스가 먼저 작동하도록
- 확장성 : 프로세스가 증가해도 시스템이 안정적으로 작동하도록
- 반응 시간 보장 : 적절한 시간 내에 프로세스에 응답
- 무한 연기 방지 : 작업이 무한히 연기 되는 것을 방지

## 스케줄링 기법

### 비선점 스케줄링(nonpreemptive) 
- 사용되는 cpu를 빼았지 못하고 기다림
- 일괄 처리방식이 적합
- 중요도가 높은 작업이 기다릴수 있음
- FIFO, SJF, 우선순위, HRN 등

### 선점 스케줄링(preemptive)
- 사용되는 cpu를 다른 프로세스가 빼았을수 있음
- 우선순위 높은 프로세스를 먼저 수행할 떄 유리
- 많은 오버헤드 초래
- RR, SRT, 다단계 큐


## 장기 스케줄러(Long-term scheduler or job scheduler)
- 디스크내의 작업을 어떤 순서로 가져올지 결정
- 디스크와 같은 저장장치에 작업들을 저장해놓고, 필요할 때 실행할 작업을 작업 큐에서 꺼내 준비 큐(Ready Queue)를 통해 메인 메모리에 적재 (new -> ready상태로 전이)
 
**+)** 시분할 시스템에서는 장기 스케줄러가 없다. 그냥 곧바로 메모리에 올라가 ready 상태가 된다.

#### 단기스케줄러(Short-term scheduler or CPU scheduler)
- CPU를 할당할 프로세스를 선택하는 스케줄러
- Ready Queue 에 존재하는 프로세스 중 어떤 프로세스에 CPU 를 할당(scheduler dispatch)할지 결정 (ready -> running상태로 전이)

#### 중기스케줄러(Medium-term scheduler or Swapper)
- ready 큐 관리
- 메모리에 적재된 프로세스의 수를 동적으로 조절하기 위한 스케줄러


- 가상메모리 체제에서 너무 많은 프로세스가 적재되면 하드디스크 입출력의 과다와 CPU경쟁이 심해져 시스템이 거의 멈추는 Trashing 현상을 방지하기 위해,
메모리에 올라간 프로세스 수를 조절하기위해 메모리 상의 프로세스를 통째로 디스크로 쫒아내는 **swap out**을 하고, 시간이 흘러 메모리에 여유가 생기면 **swap-in** 한다. 
swap out되는 프로세스는 ready, waiting상태이며 ready상태보단 waiting상태가 당장 cpu를 할당받을 가능성이 낮기 때문에 우선적으로 swap out됩니다.
